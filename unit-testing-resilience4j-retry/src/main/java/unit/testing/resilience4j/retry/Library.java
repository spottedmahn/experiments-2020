/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package unit.testing.resilience4j.retry;

import java.util.concurrent.CompletableFuture;
import java.util.concurrent.CompletionStage;
import java.util.concurrent.ScheduledExecutorService;

import io.github.resilience4j.retry.Retry;
import lombok.RequiredArgsConstructor;

@RequiredArgsConstructor
public class Library {
  private final Retry retry;
  private final ScheduledExecutorService scheduler;

  public CompletionStage<Boolean> doesntTriggersRetry() {
    var result = retry.executeCompletionStage(scheduler, () -> {
      var innerResult = new CompletableFuture<Boolean>();
      innerResult.complete(true);
      return innerResult;
    });
    return result;
  }

  public CompletionStage<Boolean> triggersRetry() {
    var result = retry.executeCompletionStage(scheduler, () -> {
      var innerResult = new CompletableFuture<Boolean>();
      innerResult.completeExceptionally(new Exception("Always fails"));
      return innerResult;
    });
    return result;
  }
}
